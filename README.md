# cpp-02-project-ja Gr.2

## セットアップと実行の手順

`src/` 配下で以下のコマンドを実行してビルドしてください

```
g++ -std=c++17 *.cpp -o elevator
```

Simulation入力ファイルを準備し、以下のコマンドでSimulation実行します

```
./elevator <sim_input> <sim_time_interval>
```

### 引数の説明

#### sim_input

Simulation設定ファイルのパスを入れてください。
設定ファイルの記述方法は `./elevator` を引数なしで実行すると確認できます。

現バージョンには以下の設定ファイルのサンプルを同梱しています。

* `base_input.txt` 一人が乗り降りするベーシックな入力です
* `base_input_2.txt` まず0階以外から呼ばれるベーシックな入力です
* `reach_input.txt` 複数人が乗り降りする入力です
* `over_capacity.txt` 複数人が乗る際重量オーバーが発生する入力です
* `multiple_pickup_dropoff.txt` 複数人が同時に乗り降りする入力です
* `single_heavy_passenger.txt` 重量オーバーで一人も乗れない状態が発生する入力です
* `nightmare_input.txt` 現バージョンでは未対応です

#### sim_time_interval

シミュレーションの1stepごとの実行時間をミリ秒単位の整数で指定できます。
これは省略可能で、省略した場合は0msを指定されたとして動作します。

## プロジェクトにおける重要な設計やその設計理由

* 乗客とエレベーターをオブジェクトとしてとらえ、それぞれPassengerクラスとElevatorクラスで定義し、エレベータ一機に対して複数人が乗ることを踏まえ集約関係を構築した。
* 将来的に複数のエレベーターに対応できるよう、クラスElevatorと依存関係にあるクラスBuildingを定義して備えた。
* 乗客の待機階の管理、状態（待機前、待機中、乗車中、降車後）はSimulatorクラスの機能として実装し、二次元のコンテナを用いてそれらの状態を管理するようにした。この際、入力テキスト（Simに引数で与えるテキストファイル）の情報と組み合わせて情報を保存することで、効率的に管理を実現した。

## このツールまたはサービスの使い方の説明 (ユーザー向けの説明)

### シミュレーションの実行と結果の見方

1. 「セットアップと実行」に従って、プログラムをビルドし、入力ファイルを準備しシミュレーションを行うことができます。
1. イベントごとに、シミュレータは以下のメッセージを出力します
   1. 毎周期：`実行ステップ、現在エレベーターがあるフロア、乗客の総重量、乗客数、エレベーターの状態（上下中・待機中）、目的階` を表示します
   1. エレベーターが呼ばれた場合：呼んだ人のIDと `called the elevator` を表示します
   1. 人が乗った場合：乗った人のIDと `picked up` を表示します
   1. 人が降りた場合：降りた人のIDと `dropped off` を表示します
   1. 乗ろうとしたが重量オーバーの場合：乗れなかった人のIDと `Elevator is over capacity. Person ID * could not be picked up.` を表示します。
1. シミュレーション終了時：`All the persons are dropped off. End simulation.` を表示します
1. エラー発生時は以下のメッセージを表示します
   1. 2機以上エレベーターを設定しようとした場合 `This simulator works only for one elevator.` を表示し、シミュレータを終了します
   1. エレベーターの最大積載量よりも重い人が居る場合 `But he is too heavy and cannot be picked up.` を表示し、以降この人を無視してシミュレーションを継続します

### 現バージョンの制約事項

1. 入力ファイルに記載する数字は全て自然数に限られています
1. エレベーターは1機のみしか設定できません
